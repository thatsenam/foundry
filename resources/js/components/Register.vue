<template>
    <main class="bg-white relative">

        <div class="relative flex">

            <!-- Content -->
            <div class="w-full ">
                <div class="min-h-screen h-full flex flex h-screen">

                    <div class="flex aligns-center justify-center m-auto shadow-lg">
                        <div class="login_image "
                             style="position: relative;background: url('images/login_image.jpeg');width: 399px; height:570px;    background-size: 100% auto;">

                            <div class="flex  justify-between flex-col py-8 ml-8" style="height: 100%">
                                <div class="flex items-center ">


                                    <div class="brand-logo mr-2">
                                        <img src="images/brand-logo.png" alt="" width="30" height="30">
                                    </div>

                                    <div class="brand-title">
                                        <h2 class="text-2xl md:text-3xl font-bold mb-1 text-white">Foundry</h2>
                                    </div>
                                </div>
                                <div class="flex text-white">
                                    <div class="tick-ok mr-2">
                                        <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                                            <path fill="currentColor"
                                                  d="M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41 10.59L10 14.17L17.59 6.58L19 8L10 17Z"/>
                                        </svg>
                                    </div>
                                    <div class="paragraphs">
                                        <div class="para1 text-sm mb-2">Launch Communities in 20 Seconds or Less.</div>
                                        <div class="para1 text-xs" style="line-height: 15px">Foundry Chat is the easiest
                                            way to create a chat community or workspace and embed it into any website.
                                            Literally in less than 20 seconds and Metaverse Ready
                                        </div>
                                    </div>
                                </div>
                            </div>


                        </div>
                        <div class="login-wrapper px-8" style="width: 399px;height:570px">

                            <div class="login-content">

                                <h1 class="text-3xl text-slate-800 font-bold mb-6">Create your Account âœ¨</h1>
                                <!-- Form -->
                                <form @submit.prevent="register">


                                    <div class="space-y-4">
                                        <div>
                                            <label class="block text-sm font-medium mb-1" for="email">Email Address
                                                <span class="text-rose-500">*</span></label>
                                            <input v-if="email_editable" v-model="user.email" id="email"
                                                   class="form-input w-full disabled:opacity-75 bg-indigo-100" disabled
                                                   type="email"/>

                                            <input v-else v-model="user.email" id="email" class="form-input w-full "
                                                   type="email"/>


                                            <span v-for="error of v$.user.email.$errors" :key="error.$uid">
                                                <div class="text-xs mt-1 text-rose-500">{{ error.$message }}</div>
                                            </span>

                                            <span v-for="error of errors.email">
                                                <div class="text-xs mt-1 text-rose-500">{{ error }}</div>
                                      </span>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium mb-1" for="name">Full Name <span
                                                class="text-rose-500">*</span></label>
                                            <input v-model="user.name" id="name" class="form-input w-full" type="text"
                                            />
                                            <span v-for="error of v$.user.name.$errors" :key="error.$uid">
                                                <div class="text-xs mt-1 text-rose-500">{{ error.$message }}</div>
                                            </span>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium mb-1" for="role">Your Role <span
                                                class="text-rose-500">*</span></label>
                                            <select v-model="user.role" id="role" class="form-select w-full">
                                                <option>Designer</option>
                                                <option>Developer</option>
                                                <option>Accountant</option>
                                            </select>
                                            <span v-for="error of v$.user.role.$errors" :key="error.$uid">
                                                <div class="text-xs mt-1 text-rose-500">{{ error.$message }}</div>
                                            </span>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium mb-1"
                                                   for="password">Password</label>
                                            <input v-model="user.password" id="password" class="form-input w-full"
                                                   type="password"
                                                   autoComplete="on"/>
                                            <span v-for="error of v$.user.password.$errors" :key="error.$uid">
                                                <div class="text-xs mt-1 text-rose-500">{{ error.$message }}</div>
                                            </span>
                                        </div>
                                    </div>
                                    <div class="flex items-center justify-between mt-6">
                                        <div class="mr-1">
                                            <label class="flex items-center">
                                                <input v-model="user.newsletter" type="checkbox" class="form-checkbox"/>
                                                <span class="text-sm ml-2">Email me about product news.</span>
                                            </label>
                                        </div>
                                        <button
                                            class="btn bg-indigo-500 hover:bg-indigo-600 text-white ml-3 whitespace-nowrap">
                                            Sign Up
                                        </button>
                                    </div>
                                </form>
                                <!-- Footer -->
                                <div class="pt-5 mt-6 border-t border-slate-200">
                                    <div class="text-sm">
                                        Have an account?
                                        <router-link class="font-medium text-indigo-500 hover:text-indigo-600"
                                                     to="/login">Sign In
                                        </router-link>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>


                </div>
            </div>


        </div>
        <div class="login-footer absolute bottom-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2">
            <div class="flex text-da ">
                <div class="logo mr-2">
                    <svg width="169" height="38" viewBox="0 0 169 38" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path opacity="0.5"
                              d="M19.4469 28.5656C26.8734 28.5656 32.8938 22.5452 32.8938 15.1187C32.8938 7.6922 26.8734 1.67181 19.4469 1.67181C12.0204 1.67181 6 7.6922 6 15.1187C6 22.5452 12.0204 28.5656 19.4469 28.5656Z"
                              fill="url(#paint0_radial_415_6939)"/>
                        <path opacity="0.5"
                              d="M26.9156 39.0246C34.3422 39.0246 40.3625 33.0042 40.3625 25.5777C40.3625 18.1512 34.3422 12.1308 26.9156 12.1308C19.4891 12.1308 13.4688 18.1512 13.4688 25.5777C13.4688 33.0042 19.4891 39.0246 26.9156 39.0246Z"
                              fill="url(#paint1_radial_415_6939)"/>
                        <path
                            d="M50.3814 15.5066C48.8056 15.5066 47.5174 16.0693 46.5544 16.9823V9.79114H42.4648V29.001H46.5544V21.5471C46.5544 19.7337 47.4924 18.8833 48.8306 18.8833C49.9812 18.8833 50.7941 19.3085 50.7941 21.1469V29.001H54.8837V20.334C54.8837 17.2324 53.3579 15.5066 50.3814 15.5066Z"
                            fill="#1E293B"/>
                        <path
                            d="M72.1807 22.3726C72.1807 18.333 69.0291 15.5066 64.6769 15.5066C60.2621 15.5066 57.123 18.333 57.123 22.3851C57.123 26.2245 59.962 29.2511 64.6769 29.2511C67.916 29.2511 70.1173 27.7253 71.2178 25.9494L67.5158 24.3486C66.9781 25.3866 65.915 26.0244 64.6519 26.0244C62.9885 26.0244 61.6253 25.0114 61.2877 23.248H72.1307C72.1682 22.9479 72.1807 22.6477 72.1807 22.3726ZM64.6519 18.5206C66.2902 18.5206 67.3407 19.3585 67.816 20.6467H61.4753C61.963 19.2585 63.0886 18.5206 64.6519 18.5206Z"
                            fill="#1E293B"/>
                        <path
                            d="M77.757 29.001L80.6209 25.2615L83.4724 29.001H88.6375L83.2098 22.3476L88.6375 15.7567H83.4974L80.6084 19.4586L77.7445 15.7567H72.5918L78.0196 22.3476L72.5918 29.001H77.757Z"
                            fill="#1E293B"/>
                        <path
                            d="M92.5902 14.0558C93.8034 14.0558 94.8414 13.0553 94.8414 11.7922C94.8414 10.5415 93.8034 9.54102 92.5902 9.54102C91.3271 9.54102 90.2891 10.5415 90.2891 11.7922C90.2891 13.0553 91.3271 14.0558 92.5902 14.0558ZM94.6038 29.001V15.7567H90.5267V29.001H94.6038Z"
                            fill="#1E293B"/>
                        <path
                            d="M104.383 33.2291C108.773 33.2291 111.824 30.4527 111.824 26.4632V13.7567H107.735V15.0198C106.672 14.0443 105.246 13.5066 103.633 13.5066C99.8808 13.5066 96.9668 16.4706 96.9668 20.3726C96.9668 24.2621 99.8808 27.2511 103.633 27.2511C105.246 27.2511 106.672 26.7133 107.735 25.7503V26.5007C107.735 28.4892 106.296 29.8024 104.37 29.8024C102.77 29.8024 101.431 29.1145 100.356 27.7388L97.6046 30.3026C99.7432 32.6663 102.169 33.2291 104.383 33.2291ZM104.496 23.8368C102.582 23.8368 101.056 22.4736 101.056 20.3726C101.056 18.284 102.582 16.9208 104.496 16.9208C106.396 16.9208 107.947 18.334 107.947 20.3726C107.947 22.4361 106.396 23.8368 104.496 23.8368Z"
                            fill="#1E293B"/>
                        <path
                            d="M121.73 27.2511C126.083 27.2511 129.234 24.4246 129.234 20.3726C129.234 16.333 126.083 13.5066 121.73 13.5066C117.316 13.5066 114.176 16.333 114.176 20.3726C114.176 24.4246 117.316 27.2511 121.73 27.2511ZM121.705 23.8368C119.792 23.8368 118.266 22.4736 118.266 20.3726C118.266 18.284 119.792 16.9208 121.705 16.9208C123.606 16.9208 125.157 18.334 125.157 20.3726C125.157 22.4361 123.606 23.8368 121.705 23.8368Z"
                            fill="#1E293B"/>
                        <path
                            d="M139.527 13.5066C137.951 13.5066 136.663 14.0693 135.7 14.9823V13.7567H131.623V27.001H135.7V19.5471C135.7 17.7337 136.638 16.8833 137.976 16.8833C139.127 16.8833 139.94 17.3085 139.94 19.1469V27.001H144.029V18.334C144.029 15.2324 142.516 13.5066 139.527 13.5066Z"
                            fill="#1E293B"/>
                        <path
                            d="M163.614 27.001L155.698 7.79114H153.709L145.793 27.001H148.169L149.945 22.6487H159.487L161.263 27.001H163.614ZM154.722 10.9177L158.662 20.5977H150.77L154.722 10.9177Z"
                            fill="#1E293B"/>
                        <path d="M168.241 27.001V7.79114H166.064V27.001H168.241Z" fill="#1E293B"/>
                        <path fill-rule="evenodd" clip-rule="evenodd"
                              d="M33.9921 22.0866V22.0865V22.0864C33.9935 21.2428 33.9948 20.3993 33.9948 19.5559C33.9948 18.9409 33.9951 18.3256 33.9953 17.7102V17.7097V17.7092V17.7069C33.9961 15.7061 33.9968 13.7036 33.9897 11.7017C33.9897 10.2807 33.42 9.15837 32.206 8.43884C27.7433 5.80022 23.2793 3.16444 18.8139 0.531495C17.579 -0.197596 16.3358 -0.164648 15.1124 0.557003C10.7419 3.14673 6.36729 5.72866 1.98849 8.3028C0.649692 9.09035 -0.00619257 10.2254 4.40557e-05 11.8197C0.018061 16.9531 0.018061 22.0861 4.40557e-05 27.2188C4.40557e-05 28.8098 0.652811 29.9428 1.9968 30.7303C6.32225 33.2598 10.6356 35.806 14.9368 38.3688C16.2911 39.1755 17.6019 39.219 18.9604 38.4134C23.299 35.8364 27.6439 33.2726 31.995 30.7218C33.3577 29.9226 34.0063 28.7492 33.9948 27.1486C33.9865 25.4616 33.9893 23.774 33.9921 22.0866ZM31.9282 18.8544L31.9284 19.5389V19.5431C31.9284 20.2488 31.9271 20.9543 31.9257 21.6598C31.9221 23.4855 31.9186 25.3109 31.9388 27.1369C31.9451 27.9479 31.653 28.4942 30.9535 28.9044C30.2676 29.308 29.5818 29.7117 28.896 30.1156C29.0114 29.8788 29.1061 29.622 29.1796 29.3451C30.1054 25.849 31.0216 22.3521 31.9282 18.8544ZM31.9258 14.2721C31.9269 13.4613 31.9294 12.6506 31.9347 11.8398C31.9347 11.0736 31.6665 10.54 30.9992 10.15C28.6439 8.77085 26.291 7.38744 23.9404 5.99972C26.4465 8.55668 28.9486 11.1165 31.4467 13.6792C31.6308 13.8687 31.7905 14.0666 31.9258 14.2721ZM20.0362 3.68964C19.3167 3.26298 18.5974 2.8359 17.8784 2.40843C17.2797 2.05345 16.7277 2.04601 16.1217 2.40843C13.7496 3.81293 11.3762 5.21473 9.00162 6.61385C12.4172 5.67164 15.8343 4.73629 19.253 3.80781C19.5093 3.73997 19.7719 3.70039 20.0362 3.68964ZM5.09838 8.91059C4.38166 9.33175 3.66483 9.75268 2.94789 10.1734C2.30136 10.5538 2.05813 11.0927 2.06021 11.8367C2.06697 14.608 2.07006 17.3795 2.0695 20.1512C2.50145 18.5097 2.93047 16.8674 3.35952 15.225L3.35962 15.2246C3.83925 13.3885 4.31892 11.5524 4.80276 9.71706C4.87918 9.42688 4.97775 9.15792 5.09838 8.91059ZM24.9982 32.4133C21.6182 33.3371 18.2393 34.2636 14.8614 35.1927C14.5545 35.2778 14.2564 35.3291 13.9672 35.3466L16.1591 36.6396C16.7433 36.985 17.2963 36.9659 17.8742 36.6236C20.2479 35.2184 22.6226 33.815 24.9982 32.4133ZM10.0426 33.0319C7.5511 30.5013 5.06892 27.9623 2.59603 25.4148C2.38994 25.2022 2.21299 24.9805 2.0652 24.7502C2.06385 25.5607 2.06219 26.3711 2.06021 27.1816C2.06021 28.0021 2.37204 28.5399 3.07262 28.9331C3.99995 29.452 4.91343 29.9966 5.82675 30.5411H5.82677L5.82699 30.5412L5.82767 30.5416C6.21419 30.7721 6.60068 31.0025 6.98818 31.2309L10.0426 33.0319ZM30.2827 15.6241C30.3719 15.8248 30.4213 16.0415 30.428 16.2619C30.3874 16.6704 30.2702 17.0876 30.1519 17.5087C30.1095 17.6595 30.067 17.8108 30.0278 17.9624C29.7466 19.0441 29.464 20.1254 29.1809 21.2065C28.3752 18.0896 27.5617 14.9745 26.7402 11.8614C27.7958 12.9391 28.8518 14.0162 29.9083 15.0928C30.0662 15.2428 30.1935 15.4234 30.2827 15.6241ZM15.5978 6.9911C18.5043 7.77613 21.4068 8.57036 24.3054 9.37379C23.3055 8.35152 22.306 7.32873 21.3069 6.30543C20.8621 5.84948 20.3455 5.69324 19.7478 5.85692L15.5978 6.9911ZM5.7314 14.3334C7.78654 12.2165 9.8469 10.105 11.9125 7.99872L8.01981 9.06343C7.35354 9.24517 6.95023 9.65329 6.77249 10.3388C6.42611 11.6707 6.07909 13.0023 5.7314 14.3334ZM6.99938 26.9163C6.23193 24.0195 5.46969 21.1227 4.71265 18.2258C4.35462 19.5909 3.99591 20.9556 3.63651 22.3199C3.47643 22.9268 3.60532 23.4433 4.03045 23.8791C5.01993 24.8918 6.00957 25.9042 6.99938 26.9163ZM12.7014 32.7419C11.6629 31.6818 10.6246 30.6214 9.58649 29.5607C12.5513 30.3789 15.5162 31.1944 18.481 32.0071C17.0764 32.3926 15.672 32.7792 14.2679 33.167C13.6484 33.3339 13.1401 33.1904 12.7014 32.7419ZM28.3877 24.2326C28.0002 25.7108 27.6132 27.1891 27.2286 28.6681C27.0571 29.3303 26.6923 29.766 26.0426 29.9435C24.5681 30.3436 23.0939 30.745 21.62 31.1476C23.8785 28.8455 26.1343 26.5405 28.3877 24.2326ZM27.2614 22.0595C27.2562 22.0358 27.2507 22.0093 27.2447 21.9808V21.9807C27.2293 21.907 27.2111 21.8201 27.1887 21.7343C26.8864 20.581 26.5842 19.4272 26.2821 18.2731C26.2822 18.3015 26.2823 18.3299 26.2825 18.3584C26.2843 18.7386 26.2862 19.1189 26.2862 19.4992V23.3254C26.2862 23.3438 26.2861 23.3622 26.2858 23.3805C26.5109 23.1509 26.7359 22.9214 26.961 22.6919C27.1284 22.525 27.2625 22.3486 27.2614 22.0595ZM24.9703 13.2569C24.9075 13.2151 24.8423 13.1745 24.7749 13.1351C23.5457 12.4159 22.3189 11.691 21.092 10.966C20.793 10.7893 20.494 10.6126 20.1949 10.436C21.458 10.7818 22.7214 11.1267 23.9851 11.4707C24.3604 11.5727 24.5797 11.7715 24.6836 12.1594C24.7792 12.5253 24.8747 12.8911 24.9703 13.2569ZM20.0592 29.7511C20.8784 28.9104 21.6981 28.0702 22.5183 27.2306C21.1385 28.0481 19.756 28.8606 18.3709 29.6682C18.3253 29.6952 18.2796 29.7208 18.2339 29.745C18.5464 29.8313 18.859 29.9177 19.1715 30.0041C19.5332 30.104 19.7952 30.0179 20.0592 29.7511ZM13.6117 28.4716C12.3103 28.1138 11.0085 27.7567 9.70637 27.4002C9.36855 27.312 9.18769 27.1079 9.09726 26.7625C8.99692 26.3779 8.89649 25.9933 8.79597 25.6087C8.88525 25.6756 8.98007 25.739 9.0804 25.7985C10.5887 26.6914 12.0991 27.5824 13.6117 28.4716ZM6.5548 17.0909C6.94241 18.5543 7.32873 20.0178 7.71377 21.4815C7.70818 19.5302 7.71087 17.5781 7.72185 15.6253C7.72272 15.497 7.73052 15.3724 7.74513 15.2516C7.42604 15.5771 7.10687 15.9025 6.78763 16.2279C6.67037 16.3325 6.58578 16.4702 6.54439 16.6236C6.50299 16.777 6.50661 16.9395 6.5548 17.0909ZM13.728 9.13251C12.6915 10.1955 11.6543 11.2577 10.6163 12.3192C12.267 11.3441 13.9188 10.3704 15.5717 9.39823C15.6677 9.34169 15.7638 9.29082 15.86 9.24564C15.4469 9.13185 15.0338 9.01797 14.6208 8.904C14.2622 8.80516 13.9899 8.86362 13.728 9.13251ZM24.2052 18.4636C24.2063 18.8088 24.2073 19.1541 24.2073 19.4992L24.2053 19.5003C24.2053 19.8182 24.2046 20.136 24.2039 20.4537C24.2019 21.3745 24.1999 22.2945 24.2146 23.2127C24.2289 23.388 24.1909 23.5637 24.1055 23.7164C24.0202 23.8692 23.8915 23.9919 23.7365 24.0683C21.6631 25.277 19.5967 26.4982 17.5373 27.7318C17.1599 27.9624 16.8502 27.9529 16.4791 27.7318C14.4328 26.511 12.3806 25.3001 10.3225 24.0991C9.93274 23.8717 9.77162 23.5772 9.77162 23.1139C9.78617 20.7098 9.78617 18.3032 9.77162 15.8942C9.7685 15.4265 9.95041 15.1459 10.3392 14.9196C12.3695 13.7405 14.3916 12.547 16.4053 11.3389C16.8294 11.0828 17.1703 11.0796 17.6017 11.3389C19.6307 12.5562 21.668 13.7583 23.7136 14.9451C24.0753 15.1555 24.2219 15.4116 24.2146 15.8368C24.1997 16.7106 24.2024 17.5871 24.2052 18.4636Z"
                              fill="url(#paint2_linear_415_6939)"/>
                        <path fill-rule="evenodd" clip-rule="evenodd"
                              d="M33.9921 22.0866V22.0865V22.0864C33.9935 21.2428 33.9948 20.3993 33.9948 19.5559C33.9948 18.9409 33.9951 18.3256 33.9953 17.7102V17.7097V17.7092V17.7069C33.9961 15.7061 33.9968 13.7036 33.9897 11.7017C33.9897 10.2807 33.42 9.15837 32.206 8.43884C27.7433 5.80022 23.2793 3.16444 18.8139 0.531495C17.579 -0.197596 16.3358 -0.164648 15.1124 0.557003C10.7419 3.14673 6.36729 5.72866 1.98849 8.3028C0.649692 9.09035 -0.00619257 10.2254 4.40557e-05 11.8197C0.018061 16.9531 0.018061 22.0861 4.40557e-05 27.2188C4.40557e-05 28.8098 0.652811 29.9428 1.9968 30.7303C6.32225 33.2598 10.6356 35.806 14.9368 38.3688C16.2911 39.1755 17.6019 39.219 18.9604 38.4134C23.299 35.8364 27.6439 33.2726 31.995 30.7218C33.3577 29.9226 34.0063 28.7492 33.9948 27.1486C33.9865 25.4616 33.9893 23.774 33.9921 22.0866ZM31.9282 18.8544L31.9284 19.5389V19.5431C31.9284 20.2488 31.9271 20.9543 31.9257 21.6598C31.9221 23.4855 31.9186 25.3109 31.9388 27.1369C31.9451 27.9479 31.653 28.4942 30.9535 28.9044C30.2676 29.308 29.5818 29.7117 28.896 30.1156C29.0114 29.8788 29.1061 29.622 29.1796 29.3451C30.1054 25.849 31.0216 22.3521 31.9282 18.8544ZM31.9258 14.2721C31.9269 13.4613 31.9294 12.6506 31.9347 11.8398C31.9347 11.0736 31.6665 10.54 30.9992 10.15C28.6439 8.77085 26.291 7.38744 23.9404 5.99972C26.4465 8.55668 28.9486 11.1165 31.4467 13.6792C31.6308 13.8687 31.7905 14.0666 31.9258 14.2721ZM20.0362 3.68964C19.3167 3.26298 18.5974 2.8359 17.8784 2.40843C17.2797 2.05345 16.7277 2.04601 16.1217 2.40843C13.7496 3.81293 11.3762 5.21473 9.00162 6.61385C12.4172 5.67164 15.8343 4.73629 19.253 3.80781C19.5093 3.73997 19.7719 3.70039 20.0362 3.68964ZM5.09838 8.91059C4.38166 9.33175 3.66483 9.75268 2.94789 10.1734C2.30136 10.5538 2.05813 11.0927 2.06021 11.8367C2.06697 14.608 2.07006 17.3795 2.0695 20.1512C2.50145 18.5097 2.93047 16.8674 3.35952 15.225L3.35962 15.2246C3.83925 13.3885 4.31892 11.5524 4.80276 9.71706C4.87918 9.42688 4.97775 9.15792 5.09838 8.91059ZM24.9982 32.4133C21.6182 33.3371 18.2393 34.2636 14.8614 35.1927C14.5545 35.2778 14.2564 35.3291 13.9672 35.3466L16.1591 36.6396C16.7433 36.985 17.2963 36.9659 17.8742 36.6236C20.2479 35.2184 22.6226 33.815 24.9982 32.4133ZM10.0426 33.0319C7.5511 30.5013 5.06892 27.9623 2.59603 25.4148C2.38994 25.2022 2.21299 24.9805 2.0652 24.7502C2.06385 25.5607 2.06219 26.3711 2.06021 27.1816C2.06021 28.0021 2.37204 28.5399 3.07262 28.9331C3.99995 29.452 4.91343 29.9966 5.82675 30.5411H5.82677L5.82699 30.5412L5.82767 30.5416C6.21419 30.7721 6.60068 31.0025 6.98818 31.2309L10.0426 33.0319ZM30.2827 15.6241C30.3719 15.8248 30.4213 16.0415 30.428 16.2619C30.3874 16.6704 30.2702 17.0876 30.1519 17.5087C30.1095 17.6595 30.067 17.8108 30.0278 17.9624C29.7466 19.0441 29.464 20.1254 29.1809 21.2065C28.3752 18.0896 27.5617 14.9745 26.7402 11.8614C27.7958 12.9391 28.8518 14.0162 29.9083 15.0928C30.0662 15.2428 30.1935 15.4234 30.2827 15.6241ZM15.5978 6.9911C18.5043 7.77613 21.4068 8.57036 24.3054 9.37379C23.3055 8.35152 22.306 7.32873 21.3069 6.30543C20.8621 5.84948 20.3455 5.69324 19.7478 5.85692L15.5978 6.9911ZM5.7314 14.3334C7.78654 12.2165 9.8469 10.105 11.9125 7.99872L8.01981 9.06343C7.35354 9.24517 6.95023 9.65329 6.77249 10.3388C6.42611 11.6707 6.07909 13.0023 5.7314 14.3334ZM6.99938 26.9163C6.23193 24.0195 5.46969 21.1227 4.71265 18.2258C4.35462 19.5909 3.99591 20.9556 3.63651 22.3199C3.47643 22.9268 3.60532 23.4433 4.03045 23.8791C5.01993 24.8918 6.00957 25.9042 6.99938 26.9163ZM12.7014 32.7419C11.6629 31.6818 10.6246 30.6214 9.58649 29.5607C12.5513 30.3789 15.5162 31.1944 18.481 32.0071C17.0764 32.3926 15.672 32.7792 14.2679 33.167C13.6484 33.3339 13.1401 33.1904 12.7014 32.7419ZM28.3877 24.2326C28.0002 25.7108 27.6132 27.1891 27.2286 28.6681C27.0571 29.3303 26.6923 29.766 26.0426 29.9435C24.5681 30.3436 23.0939 30.745 21.62 31.1476C23.8785 28.8455 26.1343 26.5405 28.3877 24.2326ZM27.2614 22.0595C27.2562 22.0358 27.2507 22.0093 27.2447 21.9808V21.9807C27.2293 21.907 27.2111 21.8201 27.1887 21.7343C26.8864 20.581 26.5842 19.4272 26.2821 18.2731C26.2822 18.3015 26.2823 18.3299 26.2825 18.3584C26.2843 18.7386 26.2862 19.1189 26.2862 19.4992V23.3254C26.2862 23.3438 26.2861 23.3622 26.2858 23.3805C26.5109 23.1509 26.7359 22.9214 26.961 22.6919C27.1284 22.525 27.2625 22.3486 27.2614 22.0595ZM24.9703 13.2569C24.9075 13.2151 24.8423 13.1745 24.7749 13.1351C23.5457 12.4159 22.3189 11.691 21.092 10.966C20.793 10.7893 20.494 10.6126 20.1949 10.436C21.458 10.7818 22.7214 11.1267 23.9851 11.4707C24.3604 11.5727 24.5797 11.7715 24.6836 12.1594C24.7792 12.5253 24.8747 12.8911 24.9703 13.2569ZM20.0592 29.7511C20.8784 28.9104 21.6981 28.0702 22.5183 27.2306C21.1385 28.0481 19.756 28.8606 18.3709 29.6682C18.3253 29.6952 18.2796 29.7208 18.2339 29.745C18.5464 29.8313 18.859 29.9177 19.1715 30.0041C19.5332 30.104 19.7952 30.0179 20.0592 29.7511ZM13.6117 28.4716C12.3103 28.1138 11.0085 27.7567 9.70637 27.4002C9.36855 27.312 9.18769 27.1079 9.09726 26.7625C8.99692 26.3779 8.89649 25.9933 8.79597 25.6087C8.88525 25.6756 8.98007 25.739 9.0804 25.7985C10.5887 26.6914 12.0991 27.5824 13.6117 28.4716ZM6.5548 17.0909C6.94241 18.5543 7.32873 20.0178 7.71377 21.4815C7.70818 19.5302 7.71087 17.5781 7.72185 15.6253C7.72272 15.497 7.73052 15.3724 7.74513 15.2516C7.42604 15.5771 7.10687 15.9025 6.78763 16.2279C6.67037 16.3325 6.58578 16.4702 6.54439 16.6236C6.50299 16.777 6.50661 16.9395 6.5548 17.0909ZM13.728 9.13251C12.6915 10.1955 11.6543 11.2577 10.6163 12.3192C12.267 11.3441 13.9188 10.3704 15.5717 9.39823C15.6677 9.34169 15.7638 9.29082 15.86 9.24564C15.4469 9.13185 15.0338 9.01797 14.6208 8.904C14.2622 8.80516 13.9899 8.86362 13.728 9.13251ZM24.2052 18.4636C24.2063 18.8088 24.2073 19.1541 24.2073 19.4992L24.2053 19.5003C24.2053 19.8182 24.2046 20.136 24.2039 20.4537C24.2019 21.3745 24.1999 22.2945 24.2146 23.2127C24.2289 23.388 24.1909 23.5637 24.1055 23.7164C24.0202 23.8692 23.8915 23.9919 23.7365 24.0683C21.6631 25.277 19.5967 26.4982 17.5373 27.7318C17.1599 27.9624 16.8502 27.9529 16.4791 27.7318C14.4328 26.511 12.3806 25.3001 10.3225 24.0991C9.93274 23.8717 9.77162 23.5772 9.77162 23.1139C9.78617 20.7098 9.78617 18.3032 9.77162 15.8942C9.7685 15.4265 9.95041 15.1459 10.3392 14.9196C12.3695 13.7405 14.3916 12.547 16.4053 11.3389C16.8294 11.0828 17.1703 11.0796 17.6017 11.3389C19.6307 12.5562 21.668 13.7583 23.7136 14.9451C24.0753 15.1555 24.2219 15.4116 24.2146 15.8368C24.1997 16.7106 24.2024 17.5871 24.2052 18.4636Z"
                              fill="url(#paint3_linear_415_6939)" fill-opacity="0.3"/>
                        <defs>
                            <radialGradient id="paint0_radial_415_6939" cx="0" cy="0" r="1"
                                            gradientUnits="userSpaceOnUse"
                                            gradientTransform="translate(19.4469 15.1187) rotate(90) scale(13.4469)">
                                <stop stop-color="#8627FF" stop-opacity="0.39"/>
                                <stop offset="1" stop-color="#FF1BF6" stop-opacity="0"/>
                            </radialGradient>
                            <radialGradient id="paint1_radial_415_6939" cx="0" cy="0" r="1"
                                            gradientUnits="userSpaceOnUse"
                                            gradientTransform="translate(26.9156 25.5777) rotate(90) scale(13.4469)">
                                <stop stop-color="#27FF98" stop-opacity="0.39"/>
                                <stop offset="1" stop-color="#1BFF24" stop-opacity="0"/>
                            </radialGradient>
                            <linearGradient id="paint2_linear_415_6939" x1="16.9988" y1="8.97713" x2="16.9988"
                                            y2="30.0674" gradientUnits="userSpaceOnUse">
                                <stop stop-color="#611CFE"/>
                                <stop offset="1" stop-color="#26D9F1"/>
                            </linearGradient>
                            <linearGradient id="paint3_linear_415_6939" x1="-1.91087e-09" y1="-3.33168e-09" x2="21.0373"
                                            y2="36.6794" gradientUnits="userSpaceOnUse">
                                <stop stop-color="#DB86F9"/>
                                <stop offset="0.504464" stop-color="#99DAFF"/>
                                <stop offset="1" stop-color="#9557F9"/>
                            </linearGradient>
                        </defs>
                    </svg>


                </div>
                <div class="copyright text-sm">
                    <div>All rights reserved. Hexigon AI suite of products.</div>
                    <p><a href="https://www.hexigon.ai/" target="_blank">View Hexigon.ai</a> <span
                        class="mx-2"> â€¢ </span> <a href="https://www.hexigon.ai/legal/terms-and-conditions"
                                                   target="_blank">Terms & Conditions</a></p>
                </div>
            </div>

        </div>

    </main>
</template>

<style scoped>
.login-content {
    align-items: center;
    justify-content: center;
    margin-top: auto;
    margin-bottom: auto;
}

.login-wrapper {
    display: flex;
    flex-direction: column;
}

.text-da {
    color: #A7BBC8;
}
</style>
<script>
import {mapActions} from 'vuex'
import {ref} from 'vue'
import router from "../router";
import useVuelidate from '@vuelidate/core'
import {required, email} from '@vuelidate/validators'
import {notification} from 'ant-design-vue';

export default {
    name: 'register',
    setup() {
        return {v$: useVuelidate()}
    },
    data() {
        return {
            user: {
                name: "",
                email: "",
                role: "",
                password: "",
                password_confirmation: "",
                newsletter: false
            },
            processing: false,
            errors: {email: []},
            email_editable: false,
            token: "",

        }
    },
    validations() {
        return {
            user: {
                name: {required},
                email: {required, email},
                role: {required},
                password: {required},
                password_confirmation: {},
                newsletter: {}
            }

        }
    },
    mounted() {
        setTimeout(() => {
            let t = this.$route.query.token;
            this.token = this.$route.query.token;
            console.log('call t',t)
            if (t) {
                console.log('call verify')
                this.verifyToken()
            } else {
                this.user.email = "";
                this.email_editable = false;
                this.$store.state.community.invite = null;
            }
        }, 1000);

    },
    methods: {
        ...mapActions({
            signIn: 'auth/login'
        }),

        verifyToken() {
            this.$store.dispatch('member/verifyToken', this.token).then(({data}) => {
                if (data !== "Expired") {
                    console.log('token',this.token);
                    this.user.email = data.email
                    this.email_editable = true;
                    this.$store.state.community.invite = data;
                } else {
                    notification['error']({
                        message: "Link Expired."
                    });
                    setTimeout(() => {
                        this.$router.push('register');
                    }, 3000);
                }
            });
        },

        async register() {
            this.v$.$validate()
            this.v$.$touch()
            this.errors = {email: []}
            this.v$.user.email.$errors.push({});
            if (this.v$.$invalid) {
                return
            }

            this.user.password_confirmation = this.user.password;
            this.user.newsletter = this.user.newsletter === true ? 1 : 0;
            console.log(this.user)
            // return
            this.processing = true
            await axios.post('/register', this.user).then(response => {
                this.signIn()
                console.log('response------',response)
                if (this.$store.state.community.invite != null) {
                    this.$store.dispatch('community/joinCommunity', this.$store.state.community.invite.community_id)
                    this.$store.dispatch('community/acceptInvitation', this.$store.state.community.invite)
                    router.push({name: 'community_browse'})

                } else {
                    router.push('onboarding-01')

                }
            }).catch(({response: {data}}) => {
                // notification['error']({
                //     message: data.message
                // });
                console.log(data)
                this.errors = data.errors
                // alert(data)
            }).finally(() => {
                this.processing = false
            })
        },


    }
}
</script>

